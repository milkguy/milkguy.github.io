

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="贾利凯">
  <meta name="keywords" content="">
  
    <meta name="description" content="开始愉快的Go语言学习之旅吧">
<meta property="og:type" content="article">
<meta property="og:title" content="Go语言入门">
<meta property="og:url" content="http://example.com/2022/06/30/Go%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8/index.html">
<meta property="og:site_name" content="乔治课堂学习笔记">
<meta property="og:description" content="开始愉快的Go语言学习之旅吧">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fpic1.zhimg.com%2Fv2-a7f5f61e231b5e5d9ea3125426bb7212_1440w.jpg%3Fsource%3D172ae18b&refer=http%3A%2F%2Fpic1.zhimg.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1659434088&t=8bd627601a767fe6c3bbc5cd485fe40a">
<meta property="article:published_time" content="2022-06-30T08:34:00.000Z">
<meta property="article:modified_time" content="2023-02-03T06:37:19.000Z">
<meta property="article:author" content="贾利凯">
<meta property="article:tag" content="Go">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fpic1.zhimg.com%2Fv2-a7f5f61e231b5e5d9ea3125426bb7212_1440w.jpg%3Fsource%3D172ae18b&refer=http%3A%2F%2Fpic1.zhimg.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1659434088&t=8bd627601a767fe6c3bbc5cd485fe40a">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>Go语言入门 - 乔治课堂学习笔记</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.2","typing":{"enable":true,"typeSpeed":100,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":"qAYPMz0NNrEXozN9bdO5vFh9-gzGzoHsz","app_key":"Ht04GXxbCgOIEJ3YwdwXw923","server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  

  

  

  

  

  
    
  



  
<meta name="generator" content="Hexo 6.2.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>JLK</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                友链
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Go语言入门"></span>
          
        </div>

        
          
  <div class="mt-3">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-author" aria-hidden="true"></i>
        贾利凯
      </span>
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-06-30 16:34" pubdate>
          2022年6月30日 下午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          14k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          115 分钟
        
      </span>
    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> 次
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

    <script type="text/javascript" src="/love.js"></script>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Go语言入门</h1>
            
              <p class="note note-info">
                
                  
                    本文最后更新于：1 年前
                  
                
              </p>
            
            
              <div class="markdown-body">
                
                <p>开始愉快的Go语言学习之旅吧</p>
<span id="more"></span>

<h2 id="Go语言学习"><a href="#Go语言学习" class="headerlink" title="Go语言学习"></a>Go语言学习</h2><ul>
<li>Go语言支持跨平台编译</li>
<li>学习Go modules包管理工具</li>
<li>在终端输入指令go fmt 文件名 可以自动格式化go语言代码</li>
</ul>
<h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><h4 id="变量的申明"><a href="#变量的申明" class="headerlink" title="变量的申明"></a>变量的申明</h4><ul>
<li><p>标准声明</p>
<p><code>var name string</code></p>
</li>
<li><p>批量声明</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">var</span> (<br>	a <span class="hljs-type">string</span><br>	b <span class="hljs-type">int</span><br>)<br></code></pre></td></tr></table></figure>
</li>
<li></li>
<li><p>申明同时指定初始值</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">var</span> name <span class="hljs-type">string</span>=<span class="hljs-string">&quot;milkboy&quot;</span><br><span class="hljs-keyword">var</span> age <span class="hljs-type">int</span> =<span class="hljs-number">18</span><br></code></pre></td></tr></table></figure>
</li>
<li><p>类型推导</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">go</span>语言会根据变量内容自动进行变量类型推导，例如：<br><span class="hljs-keyword">var</span> name =<span class="hljs-string">&quot;milkboy&quot;</span><br></code></pre></td></tr></table></figure>
</li>
<li><p>短变量声明</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs go">name:=<span class="hljs-string">&quot;milkboy&quot;</span><br>age:=<span class="hljs-number">18</span> <br></code></pre></td></tr></table></figure>
</li>
<li><p>匿名变量 _</p>
<ul>
<li>匿名变量不占用内存空间，不会分配内存。</li>
</ul>
</li>
</ul>
<blockquote>
<p>函数外面的语句必须以关键字开始</p>
<p>:&#x3D;不能再函数外面表示</p>
<p>_多用于占位，表示忽略值</p>
</blockquote>
<h3 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h3><p>常量在声明的时候和变量一样，只不过常量是恒定不变的值，声明的时候把var改成const，常量声明的时候必须赋值，整个程序运行期间不允许改变</p>
<ul>
<li>iota<ul>
<li>在定义变量时，const每增加一行，iota计数+1</li>
<li>iota常量计数器，只能用在常量里</li>
<li>iota可以实现枚举</li>
<li>iota每新增一行，iota+1，遇到const，iota清零</li>
</ul>
</li>
</ul>
<p>常量声明中，如果第二行没有赋值，那么就默认值和第一行的值相同</p>
<h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><h3 id="整型"><a href="#整型" class="headerlink" title="整型"></a>整型</h3><p><img src="/../picture/image-20220822151142231.png" srcset="/img/loading.gif" lazyload alt="整型数值范围表"></p>
<ul>
<li><p>变量在表示的时候，0b表示二进制数，0o表示八进制数，0x表示十六进制数</p>
</li>
<li><p>输出二进制：fmt.Printf(“%b\n”,n);</p>
</li>
<li><p>输出十进制：fmt.Printf(“%d\n”,n);</p>
</li>
<li><p>输出八进制：fmt.Printf(“%o\n”,n);</p>
</li>
<li><p>输出十六进制：fmt.Printf(“%x\n”,n);</p>
</li>
<li><p>输出数据类型：fmt.Printf(“%T\n”,n);\</p>
</li>
</ul>
<h3 id="浮点型"><a href="#浮点型" class="headerlink" title="浮点型"></a>浮点型</h3><p>浮点型只有两种：float64和float32</p>
<h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><p><img src="/../picture/image-20220822152247860.png" srcset="/img/loading.gif" lazyload alt="字符串转义符"></p>
<ul>
<li>字符串的常用操作</li>
</ul>
<p><img src="/../picture/image-20220822153032593.png" srcset="/img/loading.gif" lazyload alt="go语言中字符串常用方法"></p>
<h3 id="字符"><a href="#字符" class="headerlink" title="字符"></a>字符</h3><ul>
<li><code>uint8</code>类型，或者叫 byte 型，代表一个<code>ASCII码</code>字符。</li>
<li><code>rune</code>类型，代表一个 <code>UTF-8字符</code>。</li>
<li><strong>遍历中英文结合的字符串时，尽量使用for range遍历</strong></li>
<li>由于字符串底层使用的是[ ]byte和[ ]rune，所以修改字符串的时候需要先转换成[ ]byte和[ ]rune来进行修改</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">changeString</span><span class="hljs-params">()</span></span> &#123;<br>	s1 := <span class="hljs-string">&quot;big&quot;</span><br>	<span class="hljs-comment">// 强制类型转换</span><br>	byteS1 := []<span class="hljs-type">byte</span>(s1)<br>	byteS1[<span class="hljs-number">0</span>] = <span class="hljs-string">&#x27;p&#x27;</span><br>	fmt.Println(<span class="hljs-type">string</span>(byteS1))<br><br>	s2 := <span class="hljs-string">&quot;白萝卜&quot;</span><br>	runeS2 := []<span class="hljs-type">rune</span>(s2)<br>	runeS2[<span class="hljs-number">0</span>] = <span class="hljs-string">&#x27;红&#x27;</span><br>	fmt.Println(<span class="hljs-type">string</span>(runeS2))<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h3><p>go语言支持强制类型转换</p>
<h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2><h3 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h3><table>
<thead>
<tr>
<th align="center">运算符</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">+</td>
<td align="center">相加</td>
</tr>
<tr>
<td align="center">-</td>
<td align="center">相减</td>
</tr>
<tr>
<td align="center">*</td>
<td align="center">相乘</td>
</tr>
<tr>
<td align="center">&#x2F;</td>
<td align="center">相除</td>
</tr>
<tr>
<td align="center">%</td>
<td align="center">求余</td>
</tr>
</tbody></table>
<p><strong>注意：</strong> <code>++</code>（自增）和<code>--</code>（自减）在Go语言中是单独的语句，并不是运算符。</p>
<h3 id="关系运算符"><a href="#关系运算符" class="headerlink" title="关系运算符"></a>关系运算符</h3><table>
<thead>
<tr>
<th align="center">运算符</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">&#x3D;&#x3D;</td>
<td align="center">检查两个值是否相等，如果相等返回 True 否则返回 False。</td>
</tr>
<tr>
<td align="center">!&#x3D;</td>
<td align="center">检查两个值是否不相等，如果不相等返回 True 否则返回 False。</td>
</tr>
<tr>
<td align="center">&gt;</td>
<td align="center">检查左边值是否大于右边值，如果是返回 True 否则返回 False。</td>
</tr>
<tr>
<td align="center">&gt;&#x3D;</td>
<td align="center">检查左边值是否大于等于右边值，如果是返回 True 否则返回 False。</td>
</tr>
<tr>
<td align="center">&lt;</td>
<td align="center">检查左边值是否小于右边值，如果是返回 True 否则返回 False。</td>
</tr>
<tr>
<td align="center">&lt;&#x3D;</td>
<td align="center">检查左边值是否小于等于右边值，如果是返回 True 否则返回 False。</td>
</tr>
</tbody></table>
<h3 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h3><table>
<thead>
<tr>
<th align="center">运算符</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">&amp;&amp;</td>
<td align="center">逻辑 AND 运算符。 如果两边的操作数都是 True，则为 True，否则为 False。</td>
</tr>
<tr>
<td align="center">||</td>
<td align="center">逻辑 OR 运算符。 如果两边的操作数有一个 True，则为 True，否则为 False。</td>
</tr>
<tr>
<td align="center">!</td>
<td align="center">逻辑 NOT 运算符。 如果条件为 True，则为 False，否则为 True。</td>
</tr>
</tbody></table>
<h3 id="位运算符"><a href="#位运算符" class="headerlink" title="位运算符"></a>位运算符</h3><p>位运算符对整数在内存中的二进制位进行操作。</p>
<table>
<thead>
<tr>
<th align="center">运算符</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">&amp;</td>
<td align="center">参与运算的两数各对应的二进位相与。 （两位均为1才为1）</td>
</tr>
<tr>
<td align="center">|</td>
<td align="center">参与运算的两数各对应的二进位相或。 （两位有一个为1就为1）</td>
</tr>
<tr>
<td align="center">^</td>
<td align="center">参与运算的两数各对应的二进位相异或，当两对应的二进位相异时，结果为1。 （两位不一样则为1）</td>
</tr>
<tr>
<td align="center">&lt;&lt;</td>
<td align="center">左移n位就是乘以2的n次方。 “a&lt;&lt;b”是把a的各二进位全部左移b位，高位丢弃，低位补0。</td>
</tr>
<tr>
<td align="center">&gt;&gt;</td>
<td align="center">右移n位就是除以2的n次方。 “a&gt;&gt;b”是把a的各二进位全部右移b位。</td>
</tr>
</tbody></table>
<h3 id="赋值运算符"><a href="#赋值运算符" class="headerlink" title="赋值运算符"></a>赋值运算符</h3><table>
<thead>
<tr>
<th align="center">运算符</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">&#x3D;</td>
<td align="center">简单的赋值运算符，将一个表达式的值赋给一个左值</td>
</tr>
<tr>
<td align="center">+&#x3D;</td>
<td align="center">相加后再赋值</td>
</tr>
<tr>
<td align="center">-&#x3D;</td>
<td align="center">相减后再赋值</td>
</tr>
<tr>
<td align="center">*&#x3D;</td>
<td align="center">相乘后再赋值</td>
</tr>
<tr>
<td align="center">&#x2F;&#x3D;</td>
<td align="center">相除后再赋值</td>
</tr>
<tr>
<td align="center">%&#x3D;</td>
<td align="center">求余后再赋值</td>
</tr>
<tr>
<td align="center">&lt;&lt;&#x3D;</td>
<td align="center">左移后赋值</td>
</tr>
<tr>
<td align="center">&gt;&gt;&#x3D;</td>
<td align="center">右移后赋值</td>
</tr>
<tr>
<td align="center">&amp;&#x3D;</td>
<td align="center">按位与后赋值</td>
</tr>
<tr>
<td align="center">|&#x3D;</td>
<td align="center">按位或后赋值</td>
</tr>
<tr>
<td align="center">^&#x3D;</td>
<td align="center">按位异或后赋值</td>
</tr>
</tbody></table>
<h2 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h2><h3 id="if条件判断"><a href="#if条件判断" class="headerlink" title="if条件判断"></a>if条件判断</h3><h3 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h3><p>Go 语言中的所有循环类型均可以使用<code>for</code>关键字来完成。</p>
<p>for循环的基本格式如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">for</span> 初始语句;条件表达式;结束语句&#123;<br>    循环体语句<br>&#125;<br></code></pre></td></tr></table></figure>

<p>条件表达式返回<code>true</code>时循环体不停地进行循环，直到条件表达式返回<code>false</code>时自动退出循环。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">forDemo</span><span class="hljs-params">()</span></span> &#123;<br>	<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++ &#123;<br>		fmt.Println(i)<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>for循环的初始语句可以被忽略，但是初始语句后的分号必须要写，例如：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">forDemo2</span><span class="hljs-params">()</span></span> &#123;<br>	i := <span class="hljs-number">0</span><br>	<span class="hljs-keyword">for</span> ; i &lt; <span class="hljs-number">10</span>; i++ &#123;<br>		fmt.Println(i)<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>for循环的初始语句和结束语句都可以省略，例如：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">forDemo3</span><span class="hljs-params">()</span></span> &#123;<br>	i := <span class="hljs-number">0</span><br>	<span class="hljs-keyword">for</span> i &lt; <span class="hljs-number">10</span> &#123;<br>		fmt.Println(i)<br>		i++<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>这种写法类似于其他编程语言中的<code>while</code>，在<code>while</code>后添加一个条件表达式，满足条件表达式时持续循环，否则结束循环。</p>
<h3 id="switch-case"><a href="#switch-case" class="headerlink" title="switch-case"></a>switch-case</h3><p>使用<code>switch</code>语句可方便地对大量的值进行条件判断。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">switchDemo1</span><span class="hljs-params">()</span></span> &#123;<br>	finger := <span class="hljs-number">3</span><br>	<span class="hljs-keyword">switch</span> finger &#123;<br>	<span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:<br>		fmt.Println(<span class="hljs-string">&quot;大拇指&quot;</span>)<br>	<span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:<br>		fmt.Println(<span class="hljs-string">&quot;食指&quot;</span>)<br>	<span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:<br>		fmt.Println(<span class="hljs-string">&quot;中指&quot;</span>)<br>	<span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:<br>		fmt.Println(<span class="hljs-string">&quot;无名指&quot;</span>)<br>	<span class="hljs-keyword">case</span> <span class="hljs-number">5</span>:<br>		fmt.Println(<span class="hljs-string">&quot;小拇指&quot;</span>)<br>	<span class="hljs-keyword">default</span>:<br>		fmt.Println(<span class="hljs-string">&quot;无效的输入！&quot;</span>)<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>Go语言规定每个<code>switch</code>只能有一个<code>default</code>分支。</p>
<p>一个分支可以有多个值，多个case值中间使用英文逗号分隔。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">testSwitch3</span><span class="hljs-params">()</span></span> &#123;<br>	<span class="hljs-keyword">switch</span> n := <span class="hljs-number">7</span>; n &#123;<br>	<span class="hljs-keyword">case</span> <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>:<br>		fmt.Println(<span class="hljs-string">&quot;奇数&quot;</span>)<br>	<span class="hljs-keyword">case</span> <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>:<br>		fmt.Println(<span class="hljs-string">&quot;偶数&quot;</span>)<br>	<span class="hljs-keyword">default</span>:<br>		fmt.Println(n)<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>分支还可以使用表达式，这时候switch语句后面不需要再跟判断变量。例如：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">switchDemo4</span><span class="hljs-params">()</span></span> &#123;<br>	age := <span class="hljs-number">30</span><br>	<span class="hljs-keyword">switch</span> &#123;<br>	<span class="hljs-keyword">case</span> age &lt; <span class="hljs-number">25</span>:<br>		fmt.Println(<span class="hljs-string">&quot;好好学习吧&quot;</span>)<br>	<span class="hljs-keyword">case</span> age &gt; <span class="hljs-number">25</span> &amp;&amp; age &lt; <span class="hljs-number">35</span>:<br>		fmt.Println(<span class="hljs-string">&quot;好好工作吧&quot;</span>)<br>	<span class="hljs-keyword">case</span> age &gt; <span class="hljs-number">60</span>:<br>		fmt.Println(<span class="hljs-string">&quot;好好享受吧&quot;</span>)<br>	<span class="hljs-keyword">default</span>:<br>		fmt.Println(<span class="hljs-string">&quot;活着真好&quot;</span>)<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><code>fallthrough</code>语法可以执行满足条件的case的下一个case，是为了兼容C语言中的case设计的。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">switchDemo5</span><span class="hljs-params">()</span></span> &#123;<br>	s := <span class="hljs-string">&quot;a&quot;</span><br>	<span class="hljs-keyword">switch</span> &#123;<br>	<span class="hljs-keyword">case</span> s == <span class="hljs-string">&quot;a&quot;</span>:<br>		fmt.Println(<span class="hljs-string">&quot;a&quot;</span>)<br>		<span class="hljs-keyword">fallthrough</span><br>	<span class="hljs-keyword">case</span> s == <span class="hljs-string">&quot;b&quot;</span>:<br>		fmt.Println(<span class="hljs-string">&quot;b&quot;</span>)<br>	<span class="hljs-keyword">case</span> s == <span class="hljs-string">&quot;c&quot;</span>:<br>		fmt.Println(<span class="hljs-string">&quot;c&quot;</span>)<br>	<span class="hljs-keyword">default</span>:<br>		fmt.Println(<span class="hljs-string">&quot;...&quot;</span>)<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>break跳出循环的时候，只能跳出一层循环</p>
<p>break语句和continue语句可以添加代码块使用</p>
</blockquote>
<h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><h3 id="数组的声明"><a href="#数组的声明" class="headerlink" title="数组的声明"></a>数组的声明</h3><ul>
<li>数组的长度一旦定义，就不能改变，在go语言中，数组的长度也是数组类型的一部分</li>
<li><strong>定义数组时，可以使用三个点来推测数组长度，例如：<code>var a=[...]&#123;1,2,3&#125;</code></strong></li>
<li>数组声明时可以根据索引来声明，例如：<code>var a=[...]&#123;1:2,2:3,3:4&#125;</code>，数组的值为<code>[0,2,3,4]</code></li>
</ul>
<h3 id="数组的遍历"><a href="#数组的遍历" class="headerlink" title="数组的遍历"></a>数组的遍历</h3><ul>
<li>for 循环比那里</li>
<li>for range遍历</li>
</ul>
<blockquote>
<p><strong>数组是值类型，赋值和传参会复制整个数组，改变副本的值，不会改变本身的值。</strong></p>
</blockquote>
<h2 id="切片-Slice"><a href="#切片-Slice" class="headerlink" title="切片 Slice"></a>切片 Slice</h2><p>切片的本质是数组，它是基于数组类型做的一层封装。它非常灵活，支持自动扩容。</p>
<p>切片初始化以后，就不为空了，切片有自己的长度和容量，可以使用<code>len(a)</code>获取切片的长度，使用<code>cap(a)</code>获取切片的容量</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">var</span> a = []<span class="hljs-type">int</span>&#123;&#125;<br><span class="hljs-keyword">var</span> b []<span class="hljs-type">int</span><br>fmt.Println(a == <span class="hljs-literal">nil</span>) <span class="hljs-comment">//false</span><br>fmt.Println(b == <span class="hljs-literal">nil</span>) <span class="hljs-comment">//true</span><br>fmt.Println(<span class="hljs-built_in">len</span>(a)) <span class="hljs-comment">//0</span><br>fmt.Println(<span class="hljs-built_in">len</span>(b)) <span class="hljs-comment">//0</span><br></code></pre></td></tr></table></figure>

<h3 id="切片表达式"><a href="#切片表达式" class="headerlink" title="切片表达式"></a>切片表达式</h3><ul>
<li>从数组中获取切片<ul>
<li>范围：左闭右开</li>
<li>长度：high-low</li>
<li>容量：等于从low开始底层数组的容量</li>
</ul>
</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs go">a := [<span class="hljs-number">5</span>]<span class="hljs-type">int</span>&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;<br>s := a[<span class="hljs-number">1</span>:<span class="hljs-number">3</span>]<br>fmt.Println(s) <span class="hljs-comment">//[2,3]</span><br>fmt.Println(<span class="hljs-built_in">len</span>(s), <span class="hljs-built_in">cap</span>(s)) <span class="hljs-comment">//2,4</span><br></code></pre></td></tr></table></figure>

<ul>
<li>切片可以再次切片，再次执行切片时范围是容量，不是长度</li>
<li>完整的切片表达式<ul>
<li><code>a[low:high:max]</code></li>
<li>长度：high-low</li>
<li>容量：max-low</li>
</ul>
</li>
</ul>
<h3 id="使用make函数构造切片"><a href="#使用make函数构造切片" class="headerlink" title="使用make函数构造切片"></a>使用make函数构造切片</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs go">s := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>)<br>fmt.Println(s, <span class="hljs-built_in">len</span>(s), <span class="hljs-built_in">cap</span>(s)) <span class="hljs-comment">//[0 0 0] 3 5</span><br></code></pre></td></tr></table></figure>

<h3 id="切片的本质"><a href="#切片的本质" class="headerlink" title="切片的本质"></a>切片的本质</h3><p>切片的本质是对底层数组的封装，它包含了三个信息：底层数组的指针、切片的长度（len）和切片的容量（cap）。</p>
<p>举个例子，现在有一个数组<code>a := [8]int&#123;0, 1, 2, 3, 4, 5, 6, 7&#125;</code>，切片<code>s1 := a[:5]</code>，相应示意图如下。<img src="https://www.liwenzhou.com/images/Go/slice/slice_01.png" srcset="/img/loading.gif" lazyload alt="切片的本质">切片<code>s2 := a[3:6]</code>，相应示意图如下：<img src="https://www.liwenzhou.com/images/Go/slice/slice_02.png" srcset="/img/loading.gif" lazyload alt="切片的本质"></p>
<blockquote>
<p>判断切片是否为空使用len(s)&#x3D;&#x3D;0，不可以使用s&#x3D;&#x3D;nil</p>
</blockquote>
<ul>
<li>数组的长度也是数据类型的一部分</li>
<li>切片是由底层数组的指针，切片的长度，切片的容量三部分组成的</li>
<li>切片声明了之后一定要初始化才能使用</li>
</ul>
<h3 id="切片的比较"><a href="#切片的比较" class="headerlink" title="切片的比较"></a>切片的比较</h3><ul>
<li>切片之间是不能用&#x3D;&#x3D;来进行比较的，切片只能用来和nil比较</li>
</ul>
<h3 id="切片的赋值"><a href="#切片的赋值" class="headerlink" title="切片的赋值"></a>切片的赋值</h3><ul>
<li>赋值的两个切片共享的是同一个底层数组，其中一个数组值的变化会影响另一个数组</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs go">s1 := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-number">3</span>) <span class="hljs-comment">//[0 0 0]</span><br>s2 := s1             <span class="hljs-comment">//将s1直接赋值给s2，s1和s2共用一个底层数组</span><br>s2[<span class="hljs-number">0</span>] = <span class="hljs-number">100</span><br>fmt.Println(s1) <span class="hljs-comment">//[100 0 0]</span><br>fmt.Println(s2) <span class="hljs-comment">//[100 0 0]</span><br></code></pre></td></tr></table></figure>

<h3 id="切片的遍历"><a href="#切片的遍历" class="headerlink" title="切片的遍历"></a>切片的遍历</h3><ul>
<li>for循环遍历</li>
<li>for range遍历</li>
</ul>
<h3 id="切片添加元素"><a href="#切片添加元素" class="headerlink" title="切片添加元素"></a>切片添加元素</h3><p>可以使用append()方法在切片后面添加元素，如果添加另一个切片的话需要在切片后面加…</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">var</span> s []<span class="hljs-type">int</span><br>s = <span class="hljs-built_in">append</span>(s, <span class="hljs-number">1</span>)        <span class="hljs-comment">// [1]</span><br>s = <span class="hljs-built_in">append</span>(s, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>)  <span class="hljs-comment">// [1 2 3 4]</span><br>s2 := []<span class="hljs-type">int</span>&#123;<span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>&#125;  <br>s = <span class="hljs-built_in">append</span>(s, s2...)    <span class="hljs-comment">// [1 2 3 4 5 6 7]</span><br></code></pre></td></tr></table></figure>

<p>每个切片会指向一个底层数组，这个数组的容量够用就添加新增元素。当底层数组不能容纳新增的元素时，切片就会自动按照一定的策略进行“扩容”，此时该切片指向的底层数组就会更换。“扩容”操作往往发生在<code>append()</code>函数调用时，所以我们通常都需要用原变量接收append函数的返回值。</p>
<p>举个例子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	<span class="hljs-comment">//append()添加元素和切片扩容</span><br>	<span class="hljs-keyword">var</span> numSlice []<span class="hljs-type">int</span><br>	<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++ &#123;<br>		numSlice = <span class="hljs-built_in">append</span>(numSlice, i)<br>		fmt.Printf(<span class="hljs-string">&quot;%v  len:%d  cap:%d  ptr:%p\n&quot;</span>, numSlice, <span class="hljs-built_in">len</span>(numSlice), <span class="hljs-built_in">cap</span>(numSlice), numSlice)<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">[0] 1 1 0x140000ae000<br>[0 1] 2 2 0x140000ae020<br>[0 1 2] 3 4 0x140000b6000<br>[0 1 2 3] 4 4 0x140000b6000<br>[0 1 2 3 4] 5 8 0x140000b8000<br>[0 1 2 3 4 5] 6 8 0x140000b8000<br>[0 1 2 3 4 5 6] 7 8 0x140000b8000<br>[0 1 2 3 4 5 6 7] 8 8 0x140000b8000<br>[0 1 2 3 4 5 6 7 8] 9 16 0x140000ba000<br>[0 1 2 3 4 5 6 7 8 9] 10 16 0x140000ba000<br></code></pre></td></tr></table></figure>

<p>从上面的结果可以看出：</p>
<ol>
<li><code>append()</code>函数将元素追加到切片的最后并返回该切片。</li>
<li>切片numSlice的容量按照1，2，4，8，16这样的规则自动进行扩容，每次扩容后都是扩容前的2倍。</li>
</ol>
<h3 id="使用copy函数复制切片"><a href="#使用copy函数复制切片" class="headerlink" title="使用copy函数复制切片"></a>使用copy函数复制切片</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs go">a := []<span class="hljs-type">int</span>&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;<br>b := a<br>fmt.Println(a) <span class="hljs-comment">//[1 2 3 4 5]</span><br>fmt.Println(b) <span class="hljs-comment">//[1 2 3 4 5]</span><br>b[<span class="hljs-number">0</span>] = <span class="hljs-number">1000</span><br>fmt.Println(a) <span class="hljs-comment">//[1000 2 3 4 5]</span><br>fmt.Println(b) <span class="hljs-comment">//[1000 2 3 4 5]</span><br></code></pre></td></tr></table></figure>

<p>由于切片是引用类型，所以a和b其实都指向了同一块内存地址。修改b的同时a的值也会发生变化。</p>
<p>Go语言内建的<code>copy()</code>函数可以迅速地将一个切片的数据复制到另外一个切片空间中，<code>copy()</code>函数的使用格式如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">copy(destSlice, srcSlice []T)<br></code></pre></td></tr></table></figure>

<p>其中：</p>
<ul>
<li>srcSlice: 数据来源切片</li>
<li>destSlice: 目标切片</li>
</ul>
<h3 id="切片的删除"><a href="#切片的删除" class="headerlink" title="切片的删除"></a>切片的删除</h3><p>Go语言中并没有删除切片元素的专用方法，我们可以使用切片本身的特性来删除元素。 代码如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	<span class="hljs-comment">// 从切片中删除元素</span><br>	a := []<span class="hljs-type">int</span>&#123;<span class="hljs-number">30</span>, <span class="hljs-number">31</span>, <span class="hljs-number">32</span>, <span class="hljs-number">33</span>, <span class="hljs-number">34</span>, <span class="hljs-number">35</span>, <span class="hljs-number">36</span>, <span class="hljs-number">37</span>&#125;<br>	<span class="hljs-comment">// 要删除索引为2的元素</span><br>	a = <span class="hljs-built_in">append</span>(a[:<span class="hljs-number">2</span>], a[<span class="hljs-number">3</span>:]...)<br>	fmt.Println(a) <span class="hljs-comment">//[30 31 33 34 35 36 37]</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>总结一下就是：要从切片a中删除索引为<code>index</code>的元素，操作方法是<code>a = append(a[:index], a[index+1:]...)</code></p>
<h3 id="切片的排序"><a href="#切片的排序" class="headerlink" title="切片的排序"></a>切片的排序</h3><p>Go语言中不能给数组排序，只能给相对应的切片排序</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">var</span> a = [...]<span class="hljs-type">int</span>&#123;<span class="hljs-number">3</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">1</span>&#125;<br>sort.Ints(a[:])<br>fmt.Println(a)<br></code></pre></td></tr></table></figure>

<h2 id="map"><a href="#map" class="headerlink" title="map"></a>map</h2><ul>
<li><p>map是一种无序的key-value结构，在Go语言中map是引用类型，需要初始化才能使用</p>
</li>
<li><p>map的默认值是nil，需要使用make()函数来分配内存，<code>make(map[string]int,8)</code></p>
</li>
<li><p>引用类型必须初始化之后才能被使用，不能直接使用</p>
</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">//map的初始化</span><br>scoreMap := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">int</span>, <span class="hljs-number">8</span>)<br>scoreMap[<span class="hljs-string">&quot;张三&quot;</span>] = <span class="hljs-number">90</span><br>scoreMap[<span class="hljs-string">&quot;小明&quot;</span>] = <span class="hljs-number">100</span><br>fmt.Println(scoreMap)<br>fmt.Println(scoreMap[<span class="hljs-string">&quot;小明&quot;</span>])<br>fmt.Printf(<span class="hljs-string">&quot;type of a:%T\n&quot;</span>, scoreMap)<br><span class="hljs-comment">//map没有初始化，不能直接操作</span><br><span class="hljs-keyword">var</span> c <span class="hljs-keyword">map</span>[<span class="hljs-type">int</span>]<span class="hljs-type">int</span><br>c[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span> <span class="hljs-comment">//会报错</span><br>fmt.Println(c)<br></code></pre></td></tr></table></figure>

<h3 id="判断某个键是否存在"><a href="#判断某个键是否存在" class="headerlink" title="判断某个键是否存在"></a>判断某个键是否存在</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">//判断某个键是否存在</span><br><span class="hljs-keyword">var</span> scoreMap = <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">int</span>, <span class="hljs-number">8</span>)<br>scoreMap[<span class="hljs-string">&quot;沙河娜扎&quot;</span>] = <span class="hljs-number">100</span><br>scoreMap[<span class="hljs-string">&quot;沙河小王子&quot;</span>] = <span class="hljs-number">200</span><br>v, ok := scoreMap[<span class="hljs-string">&quot;沙河娜扎&quot;</span>]<br>fmt.Println(v, ok)<br></code></pre></td></tr></table></figure>

<h3 id="map的遍历"><a href="#map的遍历" class="headerlink" title="map的遍历"></a>map的遍历</h3><ul>
<li>使用for range循环来遍历key和value</li>
<li>也可以使用for range循环单独遍历key</li>
</ul>
<h3 id="删除map的某个键值对"><a href="#删除map的某个键值对" class="headerlink" title="删除map的某个键值对"></a>删除map的某个键值对</h3><ul>
<li>使用delete函数删除map的某个键值对</li>
</ul>
<h3 id="按照指定顺序遍历map"><a href="#按照指定顺序遍历map" class="headerlink" title="按照指定顺序遍历map"></a>按照指定顺序遍历map</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs go">rand.Seed(time.Now().UnixNano()) <span class="hljs-comment">//初始化随机数种子</span><br><span class="hljs-keyword">var</span> scoreMap = <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">int</span>, <span class="hljs-number">200</span>)<br><span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++ &#123;<br>key := fmt.Sprintf(<span class="hljs-string">&quot;stu%02d&quot;</span>, i) <span class="hljs-comment">//生成stu开头的字符串</span><br>value := rand.Intn(<span class="hljs-number">100</span>)          <span class="hljs-comment">//生成0~99的随机整数</span><br>scoreMap[key] = value<br>&#125;<br><span class="hljs-comment">//取出map中的所有key存入切片keys</span><br><span class="hljs-keyword">var</span> keys = <span class="hljs-built_in">make</span>([]<span class="hljs-type">string</span>, <span class="hljs-number">0</span>, <span class="hljs-number">200</span>)<br><span class="hljs-keyword">for</span> key := <span class="hljs-keyword">range</span> scoreMap &#123;<br>keys = <span class="hljs-built_in">append</span>(keys, key)<br>&#125;<br><span class="hljs-comment">//对切片进行排序</span><br>sort.Strings(keys)<br><span class="hljs-comment">//按照排序后的key遍历map</span><br><span class="hljs-keyword">for</span> _, key := <span class="hljs-keyword">range</span> keys &#123;<br>fmt.Println(key, scoreMap[key])<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="元素为map类型的切片"><a href="#元素为map类型的切片" class="headerlink" title="元素为map类型的切片"></a>元素为map类型的切片</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">var</span> mapSlice = <span class="hljs-built_in">make</span>([]<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">string</span>, <span class="hljs-number">3</span>)<br><span class="hljs-keyword">for</span> index, value := <span class="hljs-keyword">range</span> mapSlice &#123;<br>  fmt.Printf(<span class="hljs-string">&quot;index:%d value:%v\n&quot;</span>, index, value)<br>&#125;<br>fmt.Println(<span class="hljs-string">&quot;after init&quot;</span>)<br><span class="hljs-comment">// 对切片中的map元素进行初始化</span><br>mapSlice[<span class="hljs-number">0</span>] = <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">string</span>, <span class="hljs-number">10</span>)<br>mapSlice[<span class="hljs-number">0</span>][<span class="hljs-string">&quot;name&quot;</span>] = <span class="hljs-string">&quot;小王子&quot;</span><br>mapSlice[<span class="hljs-number">0</span>][<span class="hljs-string">&quot;password&quot;</span>] = <span class="hljs-string">&quot;123456&quot;</span><br>mapSlice[<span class="hljs-number">0</span>][<span class="hljs-string">&quot;address&quot;</span>] = <span class="hljs-string">&quot;沙河&quot;</span><br><span class="hljs-keyword">for</span> index, value := <span class="hljs-keyword">range</span> mapSlice &#123;<br>  fmt.Printf(<span class="hljs-string">&quot;index:%d value:%v\n&quot;</span>, index, value)<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="值为切片类型的map"><a href="#值为切片类型的map" class="headerlink" title="值为切片类型的map"></a>值为切片类型的map</h3><p>下面a的代码演示了map中值为切片类型的操作：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	<span class="hljs-keyword">var</span> sliceMap = <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>][]<span class="hljs-type">string</span>, <span class="hljs-number">3</span>)<br>	fmt.Println(sliceMap)<br>	fmt.Println(<span class="hljs-string">&quot;after init&quot;</span>)<br>	key := <span class="hljs-string">&quot;中国&quot;</span><br>	value, ok := sliceMap[key]<br>	<span class="hljs-keyword">if</span> !ok &#123;<br>		value = <span class="hljs-built_in">make</span>([]<span class="hljs-type">string</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>)<br>	&#125;<br>	value = <span class="hljs-built_in">append</span>(value, <span class="hljs-string">&quot;北京&quot;</span>, <span class="hljs-string">&quot;上海&quot;</span>)<br>	sliceMap[key] = value<br>	fmt.Println(sliceMap)<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="function"><a href="#function" class="headerlink" title="function"></a>function</h2><p>函数是组织好的、可重复使用的、用于执行指定任务的代码块。</p>
<h4 id="可变参数"><a href="#可变参数" class="headerlink" title="可变参数"></a>可变参数</h4><p>可变参数是指函数的参数数量不固定。Go语言中的可变参数通过在参数名后加<code>...</code>来标识。</p>
<p>注意：可变参数通常要作为函数的最后一个参数。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">intSum2</span><span class="hljs-params">(x ...<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>	fmt.Println(x) <span class="hljs-comment">//x是一个切片</span><br>	sum := <span class="hljs-number">0</span><br>	<span class="hljs-keyword">for</span> _, v := <span class="hljs-keyword">range</span> x &#123;<br>		sum = sum + v<br>	&#125;<br>	<span class="hljs-keyword">return</span> sum<br>&#125;<br></code></pre></td></tr></table></figure>

<p>固定参数搭配可变参数使用时，可变参数要放在固定参数的后面。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">intSum3</span><span class="hljs-params">(x <span class="hljs-type">int</span>, y ...<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>	fmt.Println(x, y)<br>	sum := x<br>	<span class="hljs-keyword">for</span> _, v := <span class="hljs-keyword">range</span> y &#123;<br>		sum = sum + v<br>	&#125;<br>	<span class="hljs-keyword">return</span> sum<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="多返回值"><a href="#多返回值" class="headerlink" title="多返回值"></a>多返回值</h4><p>Go语言中函数支持多返回值，函数如果有多个返回值时必须用<code>()</code>将所有返回值包裹起来。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">calc</span><span class="hljs-params">(x, y <span class="hljs-type">int</span>)</span></span> (<span class="hljs-type">int</span>, <span class="hljs-type">int</span>) &#123;<br>	sum := x + y<br>	sub := x - y<br>	<span class="hljs-keyword">return</span> sum, sub<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="返回值命名"><a href="#返回值命名" class="headerlink" title="返回值命名"></a>返回值命名</h4><p>函数定义时可以给返回值命名，并在函数体中直接使用这些变量，最后通过<code>return</code>关键字返回。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">calc</span><span class="hljs-params">(x, y <span class="hljs-type">int</span>)</span></span> (sum, sub <span class="hljs-type">int</span>) &#123;<br>	sum = x + y<br>	sub = x - y<br>	<span class="hljs-keyword">return</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="变量的作用域"><a href="#变量的作用域" class="headerlink" title="变量的作用域"></a>变量的作用域</h3><ul>
<li>全局变量是定义在函数外部的变量，它在程序整个运行周期内都有效。 在函数中可以访问到全局变量。</li>
<li>局部变量又分为两种： 函数内定义的变量无法在该函数外使用</li>
</ul>
<h3 id="高阶函数"><a href="#高阶函数" class="headerlink" title="高阶函数"></a>高阶函数</h3><h4 id="函数作为参数"><a href="#函数作为参数" class="headerlink" title="函数作为参数"></a>函数作为参数</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">add</span><span class="hljs-params">(x, y <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>	<span class="hljs-keyword">return</span> x + y<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">calc</span><span class="hljs-params">(x, y <span class="hljs-type">int</span>, op <span class="hljs-keyword">func</span>(<span class="hljs-type">int</span>, <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span>) <span class="hljs-type">int</span> &#123;<br>	<span class="hljs-keyword">return</span> op(x, y)<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	ret2 := calc(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, add)<br>	fmt.Println(ret2) <span class="hljs-comment">//30</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="函数作为返回值"><a href="#函数作为返回值" class="headerlink" title="函数作为返回值"></a>函数作为返回值</h4><p>函数也可以作为返回值：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">do</span><span class="hljs-params">(s <span class="hljs-type">string</span>)</span></span> (<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(<span class="hljs-type">int</span>, <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span>, <span class="hljs-type">error</span>) &#123;<br>	<span class="hljs-keyword">switch</span> s &#123;<br>	<span class="hljs-keyword">case</span> <span class="hljs-string">&quot;+&quot;</span>:<br>		<span class="hljs-keyword">return</span> add, <span class="hljs-literal">nil</span><br>	<span class="hljs-keyword">case</span> <span class="hljs-string">&quot;-&quot;</span>:<br>		<span class="hljs-keyword">return</span> sub, <span class="hljs-literal">nil</span><br>	<span class="hljs-keyword">default</span>:<br>		err := errors.New(<span class="hljs-string">&quot;无法识别的操作符&quot;</span>)<br>		<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, err<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="匿名函数和闭包"><a href="#匿名函数和闭包" class="headerlink" title="匿名函数和闭包"></a>匿名函数和闭包</h2><p>匿名函数就是没有函数名的函数，匿名函数因为没有函数名，所以没办法像普通函数那样调用，所以匿名函数需要保存到某个变量或者作为立即执行函数:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	<span class="hljs-comment">// 将匿名函数保存到变量</span><br>	add := <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(x, y <span class="hljs-type">int</span>)</span></span> &#123;<br>		fmt.Println(x + y)<br>	&#125;<br>	add(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>) <span class="hljs-comment">// 通过变量调用匿名函数</span><br><br>	<span class="hljs-comment">//自执行函数：匿名函数定义完加()直接执行</span><br>	<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(x, y <span class="hljs-type">int</span>)</span></span> &#123;<br>		fmt.Println(x + y)<br>	&#125;(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>)<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>匿名函数多用于实现回调函数和闭包。</p>
</blockquote>
<p>闭包指的是一个函数和与其相关的引用环境组合而成的实体。简单来说，<code>闭包=函数+引用环境</code>。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">adder</span><span class="hljs-params">()</span></span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>	<span class="hljs-keyword">var</span> x <span class="hljs-type">int</span><br>	<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(y <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>		x += y<br>		<span class="hljs-keyword">return</span> x<br>	&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	<span class="hljs-keyword">var</span> f = adder()<br>	fmt.Println(f(<span class="hljs-number">10</span>)) <span class="hljs-comment">//10</span><br>	fmt.Println(f(<span class="hljs-number">20</span>)) <span class="hljs-comment">//30</span><br>	fmt.Println(f(<span class="hljs-number">30</span>)) <span class="hljs-comment">//60</span><br><br>	f1 := adder()<br>	fmt.Println(f1(<span class="hljs-number">40</span>)) <span class="hljs-comment">//40</span><br>	fmt.Println(f1(<span class="hljs-number">50</span>)) <span class="hljs-comment">//90</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>变量<code>f</code>是一个函数并且它引用了其外部作用域中的<code>x</code>变量，此时<code>f</code>就是一个闭包。 在<code>f</code>的生命周期内，变量<code>x</code>也一直有效。 闭包进阶示例1：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">adder2</span><span class="hljs-params">(x <span class="hljs-type">int</span>)</span></span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>	<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(y <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>		x += y<br>		<span class="hljs-keyword">return</span> x<br>	&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	<span class="hljs-keyword">var</span> f = adder2(<span class="hljs-number">10</span>)<br>	fmt.Println(f(<span class="hljs-number">10</span>)) <span class="hljs-comment">//20</span><br>	fmt.Println(f(<span class="hljs-number">20</span>)) <span class="hljs-comment">//40</span><br>	fmt.Println(f(<span class="hljs-number">30</span>)) <span class="hljs-comment">//70</span><br><br>	f1 := adder2(<span class="hljs-number">20</span>)<br>	fmt.Println(f1(<span class="hljs-number">40</span>)) <span class="hljs-comment">//60</span><br>	fmt.Println(f1(<span class="hljs-number">50</span>)) <span class="hljs-comment">//110</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>闭包进阶示例2：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">makeSuffixFunc</span><span class="hljs-params">(suffix <span class="hljs-type">string</span>)</span></span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(<span class="hljs-type">string</span>)</span></span> <span class="hljs-type">string</span> &#123;<br>	<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(name <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">string</span> &#123;<br>		<span class="hljs-keyword">if</span> !strings.HasSuffix(name, suffix) &#123;<br>			<span class="hljs-keyword">return</span> name + suffix<br>		&#125;<br>		<span class="hljs-keyword">return</span> name<br>	&#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	jpgFunc := makeSuffixFunc(<span class="hljs-string">&quot;.jpg&quot;</span>)<br>	txtFunc := makeSuffixFunc(<span class="hljs-string">&quot;.txt&quot;</span>)<br>	fmt.Println(jpgFunc(<span class="hljs-string">&quot;test&quot;</span>)) <span class="hljs-comment">//test.jpg</span><br>	fmt.Println(txtFunc(<span class="hljs-string">&quot;test&quot;</span>)) <span class="hljs-comment">//test.txt</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>闭包进阶示例3：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">calc</span><span class="hljs-params">(base <span class="hljs-type">int</span>)</span></span> (<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span>) &#123;<br>	add := <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(i <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>		base += i<br>		<span class="hljs-keyword">return</span> base<br>	&#125;<br><br>	sub := <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(i <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>		base -= i<br>		<span class="hljs-keyword">return</span> base<br>	&#125;<br>	<span class="hljs-keyword">return</span> add, sub<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	f1, f2 := calc(<span class="hljs-number">10</span>)<br>	fmt.Println(f1(<span class="hljs-number">1</span>), f2(<span class="hljs-number">2</span>)) <span class="hljs-comment">//11 9</span><br>	fmt.Println(f1(<span class="hljs-number">3</span>), f2(<span class="hljs-number">4</span>)) <span class="hljs-comment">//12 8</span><br>	fmt.Println(f1(<span class="hljs-number">5</span>), f2(<span class="hljs-number">6</span>)) <span class="hljs-comment">//13 7</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>闭包其实并不复杂，只要牢记<code>闭包=函数+引用环境</code>。</p>
<h3 id="defer语句"><a href="#defer语句" class="headerlink" title="defer语句"></a>defer语句</h3><p>Go语言中的<code>defer</code>语句会将其后面跟随的语句进行延迟处理。在<code>defer</code>归属的函数即将返回时，将延迟处理的语句按<code>defer</code>定义的逆序进行执行，也就是说，先被<code>defer</code>的语句最后被执行，最后被<code>defer</code>的语句，最先被执行。</p>
<p>举个例子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	fmt.Println(<span class="hljs-string">&quot;start&quot;</span>)<br>	<span class="hljs-keyword">defer</span> fmt.Println(<span class="hljs-number">1</span>)<br>	<span class="hljs-keyword">defer</span> fmt.Println(<span class="hljs-number">2</span>)<br>	<span class="hljs-keyword">defer</span> fmt.Println(<span class="hljs-number">3</span>)<br>	fmt.Println(<span class="hljs-string">&quot;end&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>

<p>输出结果：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs go">start<br>end<br><span class="hljs-number">3</span><br><span class="hljs-number">2</span><br><span class="hljs-number">1</span><br></code></pre></td></tr></table></figure>

<blockquote>
<p>由于<code>defer</code>语句延迟调用的特性，所以<code>defer</code>语句能非常方便的处理资源释放问题。比如：资源清理、文件关闭、解锁及记录时间等。</p>
</blockquote>
<h2 id="defer"><a href="#defer" class="headerlink" title="defer"></a>defer</h2><p><img src="/../picture/image-20221010152155504.png" srcset="/img/loading.gif" lazyload alt="image-20221010152155504"></p>
<h2 id="匿名函数如果是闭包的话，会造成并发问题"><a href="#匿名函数如果是闭包的话，会造成并发问题" class="headerlink" title="匿名函数如果是闭包的话，会造成并发问题"></a>匿名函数如果是闭包的话，会造成并发问题</h2><p>URL: <a target="_blank" rel="noopener" href="https://reservation.bupt.edu.cn/index.php/Wechat/Booking/confirm_booking?area_id=5983&amp;td_id=15427_2022092813&amp;query_date=20220928&amp;country_id=0">https://reservation.bupt.edu.cn/index.php/Wechat/Booking/confirm_booking?area_id=5983&amp;td_id=15427_2022092813&amp;query_date=20220928&amp;country_id=0</a></p>
<p>URL: <a target="_blank" rel="noopener" href="https://reservation.bupt.edu.cn/index.php/Wechat/Booking/confirm_booking?area_id=5983&amp;td_id=15427_2022092813,15427_2022092814&amp;query_date=20220928&amp;country_id=0">https://reservation.bupt.edu.cn/index.php/Wechat/Booking/confirm_booking?area_id=5983&amp;td_id=15427_2022092813,15427_2022092814&amp;query_date=20220928&amp;country_id=0</a></p>
<p>URL: <a target="_blank" rel="noopener" href="https://reservation.bupt.edu.cn/index.php/Wechat/Booking/confirm_booking?area_id=5983&amp;td_id=15428_2022092814&amp;query_date=20220928&amp;country_id=0">https://reservation.bupt.edu.cn/index.php/Wechat/Booking/confirm_booking?area_id=5983&amp;td_id=15428_2022092814&amp;query_date=20220928&amp;country_id=0</a></p>
<p>URL: <a target="_blank" rel="noopener" href="https://reservation.bupt.edu.cn/index.php/Wechat/Booking/confirm_booking?area_id=5983&amp;td_id=15431_2022092811&amp;query_date=20220928&amp;country_id=0">https://reservation.bupt.edu.cn/index.php/Wechat/Booking/confirm_booking?area_id=5983&amp;td_id=15431_2022092811&amp;query_date=20220928&amp;country_id=0</a></p>
<p>URL: <a target="_blank" rel="noopener" href="https://reservation.bupt.edu.cn/index.php/Wechat/Booking/confirm_booking?area_id=5983&amp;td_id=15432_2022092810&amp;query_date=20220928&amp;country_id=0">https://reservation.bupt.edu.cn/index.php/Wechat/Booking/confirm_booking?area_id=5983&amp;td_id=15432_2022092810&amp;query_date=20220928&amp;country_id=0</a></p>
<p>URL: <a target="_blank" rel="noopener" href="https://reservation.bupt.edu.cn/index.php/Wechat/Booking/confirm_booking?area_id=5983&amp;td_id=15434_2022092811&amp;query_date=20220928&amp;country_id=0">https://reservation.bupt.edu.cn/index.php/Wechat/Booking/confirm_booking?area_id=5983&amp;td_id=15434_2022092811&amp;query_date=20220928&amp;country_id=0</a></p>
<p><img src="/../picture/image-20220928172145012.png" srcset="/img/loading.gif" lazyload alt="image-20220928172145012"></p>
<h2 id="Gin"><a href="#Gin" class="headerlink" title="Gin"></a>Gin</h2><p>Gin框架模版渲染自定义函数修改</p>
<p>静态文件加载</p>
<p>html模版文件加载</p>
<h2 id="Gin渲染json"><a href="#Gin渲染json" class="headerlink" title="Gin渲染json"></a>Gin渲染json</h2><p>map</p>
<p>gin.H</p>
<p>结构体：结构体字段名必须大写，可以使用tag来做定制化操作</p>
<h2 id="Gin获取query-string"><a href="#Gin获取query-string" class="headerlink" title="Gin获取query string"></a>Gin获取query string</h2><p>GET请求获取url问号后面的query string参数</p>
<p>三个方法</p>
<p>c.Query</p>
<p>c.DefaultQuery</p>
<p>c.getQuery</p>
<h2 id="Gin-form参数"><a href="#Gin-form参数" class="headerlink" title="Gin form参数"></a>Gin form参数</h2><p>c.PostForm，要和html页面中的post请求中input输入框中的id对应</p>
<p>c.DefaultPostForm</p>
<p>c.GetPostForm</p>
<h2 id="Gin-url路径参数"><a href="#Gin-url路径参数" class="headerlink" title="Gin url路径参数"></a>Gin url路径参数</h2><p>c.Param</p>
<p>注意url的匹配不要冲突</p>
<h2 id="Gin-参数绑定"><a href="#Gin-参数绑定" class="headerlink" title="Gin 参数绑定"></a>Gin 参数绑定</h2><p>使用结构体，结构体里面tag标签用form，这里用到了go语言的反射</p>
<p>c.ShouldBind 参数传递是指针，query string ,form表单里的数据，json格式的数据，都可以使用</p>
<p>c.ShouldBind作用，遍历结构体，拿结构体里的值去queryString或者post请求的数据里找</p>
<h2 id="Gin-文件上传"><a href="#Gin-文件上传" class="headerlink" title="Gin 文件上传"></a>Gin 文件上传</h2><p>c.FormFile  &#x2F;&#x2F;上传文件</p>
<p>c.SaveUploadedFile &#x2F;&#x2F;保存文件</p>
<h2 id="Gin-重定向"><a href="#Gin-重定向" class="headerlink" title="Gin 重定向"></a>Gin 重定向</h2><p>c.Redirect</p>
<h2 id="Gin路由与路由组"><a href="#Gin路由与路由组" class="headerlink" title="Gin路由与路由组"></a>Gin路由与路由组</h2><p>万能请求方法路由r.Any</p>
<p>找不到方法路由：r.NoRoute</p>
<p>路由组：videoGroup:&#x3D;r.Group(“&#x2F;video”)</p>
<p>​			  videoGroup.GET(“&#x2F;index”,func(c *gin.Context){})</p>
<h2 id="中间件"><a href="#中间件" class="headerlink" title="中间件"></a>中间件</h2><p>handle</p>
<p>c.Next()</p>
<p>r.Use(m1)</p>
<p><img src="/../picture/image-20221101100335123.png" srcset="/img/loading.gif" lazyload alt="image-20221101100335123"></p>
<p>一般写中间件的时候都当作闭包来写</p>
<p>c.set() &#x2F;&#x2F;跨中间件存取值</p>
<p>c.get()</p>
<h2 id="GORM"><a href="#GORM" class="headerlink" title="GORM"></a>GORM</h2><p>Object Relational Mapping</p>
<p>连接数据库</p>
<p>db,err:&#x3D;gorm.Open</p>
<p>&#x2F;&#x2F;映射关系</p>
<p>db.AutoMigrate</p>
<p>创建：db.create</p>
<p>查询：db.First(&amp;u)</p>
<p>更改：db.Model(&amp;u).update()</p>
<p>删除：db.delete</p>
<h2 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go">db.NewRecord(&amp;u) 判断主键是否为空<br></code></pre></td></tr></table></figure>

<p>默认值会覆盖零值，两种解决办法，一种是用指针，另一种是用sql.NullString包</p>
<h2 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h2><p>db.First(&amp;u) &#x2F;&#x2F;主键是数字</p>
<p>查询的时候不带零值，想要查询零值的话，创建的时候就得使用零值</p>
<h2 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h2><p>使用结构体更新时，只会更新非零字段，如果想要更新全部字段，请使用map[string]interface{}{</p>
<p>}</p>
<h2 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h2><p>删除操作必须指定主键，如果主键为空，gorm则会删除所有记录</p>
<p>删除操作是软删除</p>
<p>不创建gorm.Model就没有软删除了</p>
<h2 id="企业级项目划分"><a href="#企业级项目划分" class="headerlink" title="企业级项目划分"></a>企业级项目划分</h2><p>controllers：控制层，控制路由进来以后进行划分</p>
<p>dao：数据库层，主要用来进行初始化数据库等操作</p>
<p>models：模型层，主要涉及模型以及模型相关的操作</p>
<p>url—&gt;controller—&gt;logic—&gt;model</p>
<p>请求来了 —&gt;控制器  —&gt;业务逻辑层  —&gt;模型层的增删改查</p>
<p>基于区块链的保密数据共享方案</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Go/">#Go</a>
      
    </div>
  
</div>


              

              
            </div>

            
  <article id="comments" lazyload>
    
  <script type="text/javascript">
    Fluid.utils.loadComments('#comments', function() {
      var light = 'github-light';
      var dark = 'github-dark';
      var schema = document.documentElement.getAttribute('data-user-color-scheme');
      if (schema === 'dark') {
        schema = dark;
      } else {
        schema = light;
      }
      window.UtterancesThemeLight = light;
      window.UtterancesThemeDark = dark;
      var s = document.createElement('script');
      s.setAttribute('src', 'https://utteranc.es/client.js');
      s.setAttribute('repo', 'milkguy/comment-utterance');
      s.setAttribute('issue-term', 'pathname');
      
      s.setAttribute('label', 'utterances');
      
      s.setAttribute('theme', schema);
      s.setAttribute('crossorigin', 'anonymous');
      document.getElementById('comments').appendChild(s);
    })
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


  </article>


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  



  <script>
  Fluid.utils.createScript('https://lib.baomitu.com/mermaid/8.14.0/mermaid.min.js', function() {
    mermaid.initialize({"theme":"default"});
  });
</script>






    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        总访问量 
        <span id="busuanzi_value_site_pv"></span>
         次
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        总访客数 
        <span id="busuanzi_value_site_uv"></span>
         人
      </span>
    
    
  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script defer src="/js/leancloud.js" ></script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
